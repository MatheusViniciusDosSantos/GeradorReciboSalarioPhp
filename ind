<html>

<head>
    <title>Recibo Salarial</title>
    <style type="text/css">
        .estiloBordaBotoes {
            border: 1px solid #333333;
            border-radius: 8px;
            padding: 5px;
        }

        .row {
            display: flex;
        }

        .column {
            flex: 50%;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <div style="padding: 50px;">
        <form action="GerarReciboController.php" method="post">
            <div style="border: 2px solid #000000; padding: 20px;
                            border-radius: 8px;">
                <h1>Recibo Salarial</h1>
                <br /><br />

                <h5>Valor: </h5>
                <input id="valorRecebido" name="valorRecebido" type="text" class="estiloBordaBotoes" style="width: 10%;" />
                <br />

                <h5>Empregado: </h5>
                <input id="empregado" name="empregado" type="text" class="estiloBordaBotoes" style="width: 50%;" />
                <br />

                <h5>À título de: </h5>
                <input id="aTituloDe" name="aTituloDe" type="text" class="estiloBordaBotoes" style="width: 50%;" />
                <br />

                <h5>Remuneração mensal relativa à folha do mês: </h5>
                <input id="remuneracaoMes" name="remuneracaoMes" type="text" class="estiloBordaBotoes" style="width: 30%;" />
                <br />

                <h5>Empregador</h5>
                <input id="empregador" name="empregador" type="text" class="estiloBordaBotoes" style="width: 50%;" />
                <br />

                <h5>CPF ou CNPJ: </h5>
                <input id="cpf" name="cpf" type="text" class="estiloBordaBotoes" style="width: 10%;" maxlength="18" />
                <br /><br />

                <div class="row">
                    <div class="column" style="border: 1px solid #000000; border-style: none solid none none; margin-right: 50px;">
                        <h5>Cidade: </h5>
                        <input id="cidade" name="cidade" type="text" class="estiloBordaBotoes" style="width: 40%;" />
                        <br />
                    </div>
                    <div class="column">
                        <h5>Data</h5>
                        <input id="data" name="data" type="date" class="estiloBordaBotoes" />
                        <br />
                    </div>
                </div>
                <br />

                <h5>Forma de Pagamento: </h5>
                <div class="row">
                    <div style="flex: 20%;">
                        <h5>Dinheiro </h5>
                        <input id="dinheiro" onclick="clickFormaPagamento()" value="oi" type="radio" name="pagamento" checked="checked" />
                        <br />
                    </div>
                    <div style="flex: 20%;">
                        <h5>Pix </h5>
                        <input id="pix" onclick="clickFormaPagamento()" type="radio" name="pagamento" />
                        <br />
                    </div>
                    <div style="flex: 20%;">
                        <h5>Cheque </h5>
                        <input id="cheque" onclick="clickFormaPagamento()" type="radio" name="pagamento" />
                        <br />
                    </div>
                    <div style="flex: 20%;">
                        <h5>Transferência/Depósito</h5>
                        <input id="transferenciaDeposito" onclick="clickFormaPagamento()" type="radio" name="pagamento" />
                        <br />
                    </div>
                </div>
                <br />
                <div id="dinheiroDiv" style="display: none;"></div>
                <div id="pixDiv" style="display: none;">
                    <h5>Chave: </h5>
                    <input id="chavePix" type="text" class="estiloBordaBotoes" style="width: 10%;" />
                    <br />
                </div>
                <div id="transferenciaDepositoDiv" style="display: none;">
                    <h5>Conta: </h5>
                    <input id="conta" type="text" class="estiloBordaBotoes" style="width: 10%;" />
                    <br />
                    <h5>Agência: </h5>
                    <input id="agencia" type="text" class="estiloBordaBotoes" style="width: 10%;" />
                    <br />
                </div>
                <div id="chequeDiv" style="display: none;">
                    <h5>Conta: </h5>
                    <input id="conta" type="text" class="estiloBordaBotoes" style="width: 10%;" />
                    <br />
                    <h5>Agência: </h5>
                    <input id="agencia" type="text" class="estiloBordaBotoes" style="width: 10%;" />
                    <br />
                </div>
                <br /><br />

                <h5>Duas vias: </h5>
                <input id="vias" type="checkbox" />
                <br /><br />
                <input id="paragrafoNome" style="display: none;" name="paragrafoNome"></input>
                <input id="paragrafoTitulo" style="display: none;" name="paragrafoTitulo"></input>
                <input id="paragrafoValor" style="display: none;" name="paragrafoValor"></input>
                <input id="paragrafoTexto" style="display: none;" name="paragrafoTexto"></input>
                <input id="paragrafoChavePix" style="display: none;" name="paragrafoChavePix"></input>
                <input id="paragrafoCidadeData" style="display: none;" name="paragrafoCidadeData"></input>
                <input id="assinatura" style="display: none;" name="assinatura"></input>
                <input id="valorSalario" style="display: none;" name="valorSalario"></input>

                <input id="paragrafoNome2" style="display: none;" name="paragrafoNome2"></input>
                <input id="paragrafoTitulo2" style="display: none;" name="paragrafoTitulo2"></input>
                <input id="paragrafoValor2" style="display: none;" name="paragrafoValor2"></input>
                <input id="paragrafoTexto2" style="display: none;" name="paragrafoTexto2"></input>
                <input id="paragrafoChavePix2" style="display: none;" name="paragrafoChavePix2"></input>
                <input id="paragrafoCidadeData2" style="display: none;" name="paragrafoCidadeData2"></input>
                <input id="assinatura2" style="display: none;" name="assinatura2"></input>
                <input id="valorSalario2" style="display: none;" name="valorSalario2"></input>

                <button type="submit" onclick="gerarRecibo()" style="background-color: #3273dc; border: 1px solid transparent; border-radius: 8px;">
                    <div class="row" style="margin: 2px;">
                        <div style="background-color: #ffffff; padding: 1px;">
                            <i class="fa fa-file-text" style="font-size:36px; color: #3273dc;"></i>
                        </div>
                        <div style="flex: 60%;">
                            <span style="font-size: xx-large; color: #ffffff;">Gerar Recibo</span>
                        </div>
                    </div>
                </button>
            </div>
            </br></br>
        </form>
    </div>

    <script action="">
        function gerarRecibo() {
            var valorSalario = parseFloat((document.getElementById("valorRecebido")).value);
            var empregado = document.getElementById("empregado").value;
            var aTituloDe = document.getElementById("aTituloDe").value;
            var remuneracaoMes = document.getElementById("remuneracaoMes").value;
            var empregador = document.getElementById("empregador").value;
            var cpfCnpj = document.getElementById("cpf").value;
            var cidade = document.getElementById("cidade").value;
            var data = document.getElementById("data").value;
            var chavePix = document.getElementById("chavePix").value;
            var conta = document.getElementById("conta").value;
            var agencia = document.getElementById("agencia").value;
            var duasVias = document.getElementById("vias");
            var mes = verificaMes(data);

            cpfCnpj = formataCpfCnpj(cpfCnpj);

            if (validaCpfCnpj(cpfCnpj)) {
                document.getElementById("valorSalario").value = "R$: " + valorSalario + "#";
                document.getElementById("paragrafoNome").value = "Eu, " + empregado;
                document.getElementById("paragrafoTitulo").value = "Declaro para todos os efeitos, ter recebido a título de " + aTituloDe + " a importância de:";
                document.getElementById("paragrafoValor").value = (valorSalario.toString() == '1' ? (valorSalario.toString().extenso() + " real").toUpperCase() : (valorSalario.toString().extenso() + " reais").toUpperCase());
                document.getElementById("paragrafoTexto").value = "e em concordância com o disposto no Art. 462, da CLT, tenho plena consciência de que o respectivo " +
                    "valor será descontado, pelo empregador: " + empregador + ", CNPJ: " + cpfCnpj + ", do pagamento da minha remuneração mensal relativa à folha do mês de " +
                    remuneracaoMes + " e incidindo na base de cálculo de encargos sociais e fiscais para todos os efeitos legais.";
                if (chavePix != null && chavePix != undefined && chavePix != "") {
                    document.getElementById("paragrafoChavePix").value = "Pagamento realizado pelo Pix: " + chavePix;
                }
                if (conta != null && conta != undefined && conta != "" && agencia != null && agencia != undefined && agencia != "") {
                    document.getElementById("paragrafoChavePix").value = "Pagamento realizado na conta: " + conta + ", agência: " + agencia;
                }
                document.getElementById("paragrafoCidadeData").value = cidade + ", " + data[8] + data[9] + " de " + mes + " de " + data[0] + data[1] + data[2] + data[3];
                document.getElementById("assinatura").value = empregado;


                if (duasVias.checked == true) {
                    document.getElementById("reciboSalario2").style.display = "block";
                    document.getElementById("valorSalario2").value = "R$: " + valorSalario + "#";
                    document.getElementById("paragrafoNome2").value = "Eu, " + empregado;
                    document.getElementById("paragrafoTitulo2").value = "Declaro para todos os efeitos, ter recebido a título de " + aTituloDe + " a importância de:";
                    document.getElementById("paragrafoValor2").value = (valorSalario.toString() == '1' ? (valorSalario.toString().extenso() + " real").toUpperCase() : (valorSalario.toString().extenso() + " reais").toUpperCase());
                    document.getElementById("paragrafoTexto2").value = "e em concordância com o disposto no Art. 462, da CLT, tenho plena consciência de que o respectivo " +
                        "valor será descontado, pelo empregador: " + empregador + ", CNPJ: " + cpfCnpj + ", do pagamento da minha remuneração mensal relativa à folha do mês de " +
                        remuneracaoMes + " e incidindo na base de cálculo de encargos sociais e fiscais para todos os efeitos legais.";
                    if (chavePix != null && chavePix != undefined && chavePix != "") {
                        document.getElementById("paragrafoChavePix2").value = "Pagamento realizado pelo Pix: " + chavePix;
                    }
                    if (conta != null && conta != undefined && conta != "" && agencia != null && agencia != undefined && agencia != "") {
                        document.getElementById("paragrafoChavePix2").value = "Pagamento realizado na conta: " + conta + ", agência: " + agencia;
                    }
                    document.getElementById("paragrafoCidadeData2").value = cidade + ", " + data[8] + data[9] + " de " + mes + " de " + data[0] + data[1] + data[2] + data[3];
                    document.getElementById("assinatura2").value = empregado;

                } else {
                    document.getElementById("reciboSalario2").style.display = "none";
                }

                mostrarRecibo();

            } else {
                alert("Erro no cpf/cnpj");
            }
        }



        function mostrarRecibo() {
            var reciboPronto = document.getElementById("reciboPronto").style.display;

            if (reciboPronto == "none") {
                document.getElementById("reciboPronto").style.display = "block";
            } else {
                document.getElementById("reciboPronto").style.display = "none";
            }
        }

        function validaFormaPagamento(formaPagamento) {
            var idString = "dinheiro";
            for (i = 0; i < formaPagamento.length; i++) {
                if (!formaPagamento[i].checked) {
                    document.getElementById(formaPagamento[i].id.toString() + "Div").style.display = "none";
                } else {
                    idString = formaPagamento[i].id.toString();
                }
            }
            return idString;
        }

        function clickFormaPagamento() {
            var selecionado = document.getElementsByName("pagamento");
            var formaPagamento = validaFormaPagamento(selecionado);
            document.getElementById(formaPagamento + "Div").style.display = "block";
        }

        function verificaMes(data) {
            if (data[6] == '1' || data[6] == '2') {
                if (data[6] == '1') {
                    if (data[5] == 1) {
                        return "novembro";
                    } else {
                        return "janeiro";
                    }
                } else {
                    if (data[5] == 1) {
                        return "dezembro";
                    } else {
                        return "fevereiro";
                    }
                }
            } else if (data[6] == '3') {
                return "março";
            } else if (data[6] == '4') {
                return "abril";
            } else if (data[6] == '5') {
                return "maio";
            } else if (data[6] == '6') {
                return "junho";
            } else if (data[6] == '7') {
                return "julho";
            } else if (data[6] == '8') {
                return "agosto";
            } else if (data[6] == '9') {
                return "setembro";
            } else if (data[6] == '0') {
                return "outubro";
            } else {
                return "janeiro";
            }
        }

        function abrirImpressao() {
            var divAImprimir = document.getElementById("reciboImprimir").innerHTML;
            var janelaDeImpressao = window.open();
            janelaDeImpressao.document.write(divAImprimir);
            janelaDeImpressao.print();
            janelaDeImpressao.close();
        }

        //Função que vai transformar os valores númericos na sua escrita por extenso
        String.prototype.extenso = function(c) { // Função para converter número no formato string para número por extenso.
            var ex = [
                ["zero", "um", "dois", "três", "quatro", "cinco", "seis", "sete", "oito", "nove", "dez", "onze", "doze", "treze", "quatorze", "quinze", "dezesseis", "dezessete", "dezoito", "dezenove"],
                ["dez", "vinte", "trinta", "quarenta", "cinquenta", "sessenta", "setenta", "oitenta", "noventa"],
                ["cem", "cento", "duzentos", "trezentos", "quatrocentos", "quinhentos", "seiscentos", "setecentos", "oitocentos", "novecentos"],
                ["mil", "milhão", "bilhão", "trilhão", "quadrilhão", "quintilhão", "sextilhão", "setilhão", "octilhão", "nonilhão", "decilhão", "undecilhão", "dodecilhão", "tredecilhão", "quatrodecilhão", "quindecilhão", "sedecilhão", "septendecilhão", "octencilhão", "nonencilhão"]
            ];
            var a, n, v, i, n = this.replace(c ? /[^,\d]/g : /\D/g, "").split(","),
                e = " e ",
                $ = "real",
                d = "centavo",
                sl;
            for (var f = n.length - 1, l, j = -1, r = [], s = [], t = ""; ++j <= f; s = []) {
                j && (n[j] = (("." + n[j]) * 1).toFixed(2).slice(2));
                if (!(a = (v = n[j]).slice((l = v.length) % 3).match(/\d{3}/g), v = l % 3 ? [v.slice(0, l % 3)] : [], v = a ? v.concat(a) : v).length) continue;
                for (a = -1, l = v.length; ++a < l; t = "") {
                    if (!(i = v[a] * 1)) continue;
                    i % 100 < 20 && (t += ex[0][i % 100]) ||
                        i % 100 + 1 && (t += ex[1][(i % 100 / 10 >> 0) - 1] + (i % 10 ? e + ex[0][i % 10] : ""));
                    s.push((i < 100 ? t : !(i % 100) ? ex[2][i == 100 ? 0 : i / 100 >> 0] : (ex[2][i / 100 >> 0] + e + t)) +
                        ((t = l - a - 2) > -1 ? " " + (i > 1 && t > 0 ? ex[3][t].replace("ão", "ões") : ex[3][t]) : ""));
                }
                a = ((sl = s.length) > 1 ? (a = s.pop(), s.join(" ") + e + a) : s.join("") || ((!j && (n[j + 1] * 1 > 0) || r.length) ? "" : ex[0][0]));
                a && r.push(a + (c ? (" " + (v.join("") * 1 > 1 ? j ? d + "s" : (/0{6,}$/.test(n[0]) ? "de " : "") + $.replace("l", "is") : j ? d : $)) : ""));
            }
            return r.join(e);
        }

        function validaCpfCnpj(val) {
            if (val.length == 14) {
                var cpf = val.trim();

                cpf = cpf.replace(/\./g, '');
                cpf = cpf.replace('-', '');
                cpf = cpf.split('');

                var v1 = 0;
                var v2 = 0;
                var aux = false;

                for (var i = 1; cpf.length > i; i++) {
                    if (cpf[i - 1] != cpf[i]) {
                        aux = true;
                    }
                }

                if (aux == false) {
                    return false;
                }

                for (var i = 0, p = 10;
                    (cpf.length - 2) > i; i++, p--) {
                    v1 += cpf[i] * p;
                }

                v1 = ((v1 * 10) % 11);

                if (v1 == 10) {
                    v1 = 0;
                }

                if (v1 != cpf[9]) {
                    return false;
                }

                for (var i = 0, p = 11;
                    (cpf.length - 1) > i; i++, p--) {
                    v2 += cpf[i] * p;
                }

                v2 = ((v2 * 10) % 11);

                if (v2 == 10) {
                    v2 = 0;
                }

                if (v2 != cpf[10]) {
                    return false;
                } else {
                    return true;
                }
            } else if (val.length == 18) {
                var cnpj = val.trim();

                cnpj = cnpj.replace(/\./g, '');
                cnpj = cnpj.replace('-', '');
                cnpj = cnpj.replace('/', '');
                cnpj = cnpj.split('');

                var v1 = 0;
                var v2 = 0;
                var aux = false;

                for (var i = 1; cnpj.length > i; i++) {
                    if (cnpj[i - 1] != cnpj[i]) {
                        aux = true;
                    }
                }

                if (aux == false) {
                    return false;
                }

                for (var i = 0, p1 = 5, p2 = 13;
                    (cnpj.length - 2) > i; i++, p1--, p2--) {
                    if (p1 >= 2) {
                        v1 += cnpj[i] * p1;
                    } else {
                        v1 += cnpj[i] * p2;
                    }
                }

                v1 = (v1 % 11);

                if (v1 < 2) {
                    v1 = 0;
                } else {
                    v1 = (11 - v1);
                }

                if (v1 != cnpj[12]) {
                    return false;
                }

                for (var i = 0, p1 = 6, p2 = 14;
                    (cnpj.length - 1) > i; i++, p1--, p2--) {
                    if (p1 >= 2) {
                        v2 += cnpj[i] * p1;
                    } else {
                        v2 += cnpj[i] * p2;
                    }
                }

                v2 = (v2 % 11);

                if (v2 < 2) {
                    v2 = 0;
                } else {
                    v2 = (11 - v2);
                }

                if (v2 != cnpj[13]) {
                    return false;
                } else {
                    return true;
                }
            } else {
                return false;
            }
        }

        function formataCpfCnpj(v) {

            //Remove tudo o que não é dígito
            v = v.replace(/\D/g, "")

            if (v.length <= 14) { //CPF

                //Coloca um ponto entre o terceiro e o quarto dígitos
                v = v.replace(/(\d{3})(\d)/, "$1.$2")

                //Coloca um ponto entre o terceiro e o quarto dígitos
                //de novo (para o segundo bloco de números)
                v = v.replace(/(\d{3})(\d)/, "$1.$2")

                //Coloca um hífen entre o terceiro e o quarto dígitos
                v = v.replace(/(\d{3})(\d{1,2})$/, "$1-$2")

            } else { //CNPJ

                //Coloca ponto entre o segundo e o terceiro dígitos
                v = v.replace(/^(\d{2})(\d)/, "$1.$2")

                //Coloca ponto entre o quinto e o sexto dígitos
                v = v.replace(/^(\d{2})\.(\d{3})(\d)/, "$1.$2.$3")

                //Coloca uma barra entre o oitavo e o nono dígitos
                v = v.replace(/\.(\d{3})(\d)/, ".$1/$2")

                //Coloca um hífen depois do bloco de quatro dígitos
                v = v.replace(/(\d{4})(\d)/, "$1-$2")

            }

            return v

        }
    </script>

</body>

</html>
